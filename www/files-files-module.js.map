{"version":3,"sources":["webpack:///./src/app/files/files.module.ts","webpack:///./src/app/files/files.page.html","webpack:///./src/app/files/files.page.scss","webpack:///./src/app/files/files.page.ts"],"names":[],"mappings":"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","file":"files-files-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\nimport { IonicModule } from '@ionic/angular';\nimport { FilesPage } from './files.page';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SharedModule } from '../shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FilesPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    SharedModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forChild()\n  ],\n  declarations: [FilesPage]\n})\nexport class FilesPageModule { }\n","module.exports = \"<ion-header>\\n  <app-header [title]=\\\"'file.title' | translate\\\" [showMenu]=\\\"false\\\" [showBack]=\\\"true\\\" [isGoBack]=\\\"back\\\"\\n    [noBorder]=\\\"true\\\">\\n  </app-header>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"tabs-list\\\" *ngIf=\\\"!showSkeleton\\\">\\n    <div class=\\\"custom-tab\\\" (click)=\\\"selectTab('images')\\\" [ngClass]=\\\"{'active-tab': activeTab == 'images'}\\\">\\n      {{ \\\"file.images\\\" | translate }}</div>\\n    <div class=\\\"custom-tab\\\" (click)=\\\"selectTab('files')\\\" [ngClass]=\\\"{'active-tab':  activeTab == 'files'}\\\">\\n      {{ \\\"file.files\\\" | translate }}\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"currentMyProject\\\" class=\\\"image-container\\\">\\n    <div *ngFor=\\\"let task of currentMyProject.tasks\\\">\\n      <ion-card *ngIf=\\\"activeTab == 'images' && (task.remarks || task.imageUrl)\\\">\\n        <ion-card-header>\\n          <h4> {{task.title}} </h4>\\n        </ion-card-header>\\n        <ion-card-content *ngIf=\\\"task.remarks && !task.imageUrl\\\">\\n          {{task.remarks}}\\n        </ion-card-content>\\n        <ion-card-content *ngIf=\\\"task.remarks && task.imageUrl\\\">\\n          <ion-row>\\n            <ion-col size=\\\"6\\\">\\n              {{task.remarks}}\\n            </ion-col>\\n            <ion-col size=\\\"6\\\">\\n              <img src=\\\"{{task.imageUrl}}\\\">\\n            </ion-col>\\n          </ion-row>\\n        </ion-card-content>\\n      </ion-card>\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"currentMyProject\\\" class=\\\"file-container\\\">\\n    <div *ngFor=\\\"let task of currentMyProject.tasks\\\">\\n      <ion-card *ngIf=\\\"activeTab == 'files' && task.file\\\" style=\\\"border-radius: 4px;\\\">\\n        <ion-card-header style=\\\"background: #e3e3e3; color: #000; padding: 10px;\\\">\\n          <h5> {{task.title}} </h5>\\n        </ion-card-header>\\n        <ion-card-content style=\\\"padding: 0px;\\\">\\n          <ion-card style=\\\"padding: 0px; border-radius: 0px;color: #000;\\\" >\\n            <ion-grid>\\n              <ion-row>\\n                <ion-col style=\\\"min-width: 85%; margin: auto;\\n                          font-weight: 500; font-size: 1.2em;\\\">\\n                  <a href={{task.downloadLink}} target=\\\"blank\\\" style=\\\"color: #000;text-decoration: none; width: 100%;\\\" >  {{ task.file.name}} </a>\\n                </ion-col>\\n                <ion-col class=\\\"arrow-mark\\\">\\n                  <ion-icon name=\\\"ios-arrow-forward\\\"> </ion-icon>\\n                </ion-col>\\n              </ion-row>\\n            </ion-grid>\\n          </ion-card>\\n        </ion-card-content>\\n      </ion-card>\\n    </div>\\n  </div>\\n</ion-content>\"","module.exports = \".tabs-list {\\n  position: fixed;\\n  width: 100%;\\n  z-index: 999; }\\n\\n.custom-card {\\n  margin: 0px;\\n  background: #fff; }\\n\\n.custom-card ion-card-content {\\n    padding: 0px;\\n    font-size: 16px;\\n    color: #000; }\\n\\n.custom-tab {\\n  width: 50%;\\n  background: #fff;\\n  color: #000;\\n  float: left;\\n  padding: 10px;\\n  text-align: center;\\n  font-size: 18px;\\n  border-bottom: 2px solid #b23e33; }\\n\\n.active-tab {\\n  background: #b23e33;\\n  color: #fff;\\n  border-radius: 6px; }\\n\\n.image-container {\\n  margin-top: 60px; }\\n\\n.image-container ion-card {\\n    border-radius: 1em;\\n    color: #000; }\\n\\n.image-container ion-card ion-card-header {\\n      border-bottom: 1px solid #000;\\n      margin: 0px 10px;\\n      padding: 10px; }\\n\\n.image-container ion-card ion-card-header h4 {\\n        margin-top: 5px;\\n        margin-bottom: 5px; }\\n\\n.image-container ion-card ion-card-content {\\n      padding-top: 10px; }\\n\\n.file-container {\\n  margin-top: 60px; }\\n\\n.file-container .arrow-mark {\\n    margin: auto;\\n    text-align: right;\\n    font-size: 1.5em; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy92aXNod2FuYXRoYmFkaWdlci9Eb2N1bWVudHMvYXBwcy9zbC11bm5hdGkvdW5uYXRpLWZlYi9zbC11bm5hdGktbW9iaWxlL3NyYy9hcHAvZmlsZXMvZmlsZXMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBZTtFQUNmLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBRWQ7RUFFRSxXQUFXO0VBQ1gsZ0JBQWUsRUFBQTs7QUFIakI7SUFLRSxZQUFZO0lBQ1osZUFBZTtJQUNmLFdBQVcsRUFBQTs7QUFHYjtFQUNFLFVBQVM7RUFDVCxnQkFBZTtFQUNmLFdBQVc7RUFDVCxXQUFXO0VBQ1gsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixlQUFlO0VBQ2YsZ0NBQWdDLEVBQUE7O0FBRXBDO0VBQ0UsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxrQkFBa0IsRUFBQTs7QUFHcEI7RUFDRSxnQkFBZSxFQUFBOztBQURqQjtJQUdJLGtCQUFrQjtJQUNsQixXQUFXLEVBQUE7O0FBSmY7TUFNUSw2QkFBNkI7TUFDN0IsZ0JBQWdCO01BQ2hCLGFBQWEsRUFBQTs7QUFSckI7UUFVWSxlQUFlO1FBQ2Ysa0JBQWtCLEVBQUE7O0FBWDlCO01BZVEsaUJBQWlCLEVBQUE7O0FBSXpCO0VBRUUsZ0JBQWUsRUFBQTs7QUFGakI7SUFJSSxZQUFZO0lBQ1osaUJBQWlCO0lBQ2pCLGdCQUFnQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvZmlsZXMvZmlsZXMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRhYnMtbGlzdHtcbiAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgei1pbmRleDogOTk5O1xuICB9XG4gIC5jdXN0b20tY2FyZFxuICB7XG4gICAgbWFyZ2luOiAwcHg7XG4gICAgYmFja2dyb3VuZDojZmZmO1xuICAgIGlvbi1jYXJkLWNvbnRlbnR7XG4gICAgcGFkZGluZzogMHB4O1xuICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICBjb2xvcjogIzAwMDtcbiAgICB9XG4gIH1cbiAgLmN1c3RvbS10YWJ7XG4gICAgd2lkdGg6NTAlO1xuICAgIGJhY2tncm91bmQ6I2ZmZjtcbiAgICBjb2xvcjogIzAwMDtcbiAgICAgIGZsb2F0OiBsZWZ0O1xuICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICAgIGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjYjIzZTMzO1xuICB9XG4gIC5hY3RpdmUtdGFie1xuICAgIGJhY2tncm91bmQ6ICNiMjNlMzM7XG4gICAgY29sb3I6ICNmZmY7XG4gICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICB9XG5cbiAgLmltYWdlLWNvbnRhaW5lcntcbiAgICBtYXJnaW4tdG9wOjYwcHg7XG4gICAgaW9uLWNhcmR7XG4gICAgICBib3JkZXItcmFkaXVzOiAxZW07XG4gICAgICBjb2xvcjogIzAwMDtcbiAgICAgIGlvbi1jYXJkLWhlYWRlcntcbiAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgIzAwMDtcbiAgICAgICAgICBtYXJnaW46IDBweCAxMHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICBoNHtcbiAgICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xuICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA1cHg7XG4gICAgICAgICAgICB9XG4gICAgICB9XG4gICAgICBpb24tY2FyZC1jb250ZW50e1xuICAgICAgICAgIHBhZGRpbmctdG9wOiAxMHB4OztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLmZpbGUtY29udGFpbmVyXG4gIHtcbiAgICBtYXJnaW4tdG9wOjYwcHg7XG4gICAgLmFycm93LW1hcmt7XG4gICAgICBtYXJnaW46IGF1dG87XG4gICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgfVxuICB9Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { CreateTaskService } from '../create-task/create-task.service';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer/ngx';\nimport { Platform } from '@ionic/angular';\nimport { Base64 } from '@ionic-native/base64/ngx';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileChooser } from '@ionic-native/file-chooser/ngx';\ndeclare var cordova: any;\n\n@Component({\n  selector: 'app-files',\n  templateUrl: './files.page.html',\n  styleUrls: ['./files.page.scss'],\n})\nexport class FilesPage implements OnInit {\n  currentMyProject;\n  activeTab = 'images';\n  isIos;\n  appFolderPath;\n  back = 'project-view/project-detail/my_projects';\n  constructor(public createTaskService: CreateTaskService,\n    public route: ActivatedRoute,\n    public platform: Platform,\n    public transfer: FileTransfer,\n    public base64: Base64,\n    public fileChooser: FileChooser,\n    public file: File\n  ) {\n    route.params.subscribe(params => {\n      this.getCurrentProject(params.id);\n    })\n  }\n\n  ngOnInit() {\n    this.platform.ready().then(() => {\n      this.isIos = this.platform.is('ios') ? true : false;\n      this.appFolderPath = this.isIos ? cordova.file.documentsDirectory + 'projects' : cordova.file.externalDataDirectory + 'projects';\n    })\n  }\n  public getCurrentProject(id) {\n    this.createTaskService.getProjectById(id).then(project => {\n      if (project.tasks && project.tasks.length > 0) {\n        project.tasks.forEach(task => {\n          console.log(task, \"task\");\n          if (task.imageUrl) {\n            task.imageUrl = 'data:image/jpeg;base64,' + task.imageUrl\n          } if (task.file) {\n            this.downloadFile(task);\n          }\n        });\n      }\n\n      this.currentMyProject = project;\n    })\n  }\n  public selectTab(type) {\n    this.activeTab = type;\n  }\n  downloadFile(task) {\n    console.log(task.file.url);\n    const downloadLink = document.createElement(\"a\");\n    const fileName = task.file.name;\n    downloadLink.href = task.file.url;\n    downloadLink.download = fileName;\n    console.log(downloadLink, \"downloadLink\");\n    console.log(downloadLink.download, \"downloadLink.download\");\n    task.downloadLink = downloadLink.download;\n    // downloadLink.click();\n    // downloadLink.dispatchEvent(new MouseEvent('click', { bubbles: true, cancelable: true, view: window }));\n\n    // const fileName = name.replace(/\\s/g, \"\");\n    // const fileTransfer: FileTransferObject = this.transfer.create();\n    // const url = base64Content;\n    // fileTransfer.download(url, this.appFolderPath + '/' + fileName).then((entry) => {\n    //   this.base64.encodeFile(entry.nativeURL).then((base64File: string) => {\n    //     let data = base64File.split(',');\n    //     let base64Data = data;\n    //   }, (err) => {\n    //     console.log(err);\n    //   });\n    // }, (error) => {\n    //   console.log(error);\n    // });\n\n  }\n}\n"],"sourceRoot":""}